<ion-view view-title="Cuestionario" cache-view="false">
  <ion-content>
    <form class="form-horizontal" role="form" name="form.testForm" ng-submit="submitAnswer($event)" novalidate>
      <ion-slide-box delegate-handle="img-viewer">
        <ion-slide ng-repeat="preg in cuestionario.questions  track by $index" ng-init="updateSlider()">
          <md-card>
            <md-card-header>
              <md-card-header-text>
                <span class="md-subhead">Pregunta {{$index+1}}</span>
              </md-card-header-text>
            </md-card-header>
            <img class="md-card-image" ng-src={{baseURL+preg.image}}>
            <md-card-title>
              <md-card-title-text>
                <span class="md-headline">{{preg.pregunta}}</span>
                <span class="md-subhead">Selecciona una respuesta</span>
              </md-card-title-text>
            </md-card-title>

            <md-card-content ng-if="preg.tipo=='unica'">
              <!-- Si es tipo Ãºnica -->
              <md-radio-group ng-model="answer.questions[$index].r " required>
                <md-radio-button value="{{preg.r1}}" class="md-primary">{{preg.r1}}</md-radio-button>
                <md-radio-button value="{{preg.r2}}" class="md-primary">{{preg.r2}}</md-radio-button>
                <md-radio-button value="{{preg.r3}}" class="md-primary">{{preg.r3}}</md-radio-button>
                <md-radio-button value="{{preg.r4}}" class="md-primary">{{preg.r4}}</md-radio-button>
              </md-radio-group>
            </md-card-content>

            <md-card-content ng-if="preg.tipo=='multiple'">
              <ul class="list-group list-group-flush">
                <li class="list-group-item">
                  <md-checkbox class="md-primary" ng-checked="exists(preg.r1, selected[$index])" ng-click="toggle(preg.r1,selected[$index])">
                    {{preg.r1}}
                  </md-checkbox>
                </li>
                <li class="list-group-item">
                  <md-checkbox class="md-primary" ng-checked="exists(preg.r2, selected[$index])" ng-click="toggle(preg.r2, selected[$index])">
                    {{preg.r2}}
                  </md-checkbox>
                </li>
                <li class="list-group-item">
                  <md-checkbox class="md-primary" ng-checked="exists(preg.r3, selected[$index])" ng-click="toggle(preg.r3, selected[$index])">
                    {{preg.r3}}
                  </md-checkbox>
                </li>
                <li class="list-group-item">
                  <md-checkbox class="md-primary" ng-checked="exists(preg.r4, selected[$index])" ng-click="toggle(preg.r4, selected[$index])">
                    {{preg.r4}}
                  </md-checkbox>
                </li>
              </ul>
            </md-card-content>
          </md-card>
        </ion-slide>
      </ion-slide-box>
      <md-button type="submit" md-colors="{background: 'teal'}" class="md-raised md-accent" ng-disabled="form.testForm.$invalid">Listo !</md-button>
    </form>
  </ion-content>
</ion-view>