<!-- 
    Test-Manager
    Copyright (c) 2016 - 2017 Fernán Ramos Sáiz
    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.

 -->
<div class="container">
    <div class="row row-content">
        <div>
            <md-content>
                <md-tabs md-dynamic-height md-border-bottom>
                    <md-tab label="{{'MAKERTAB1' | translate}}">
                        <md-content class="md-padding">
                            <div class="col-xs-12">
                                <h3 translate>{{'MAKERTITLE'}}</h3>
                                <hr>
                            </div>
                            <form class="form-horizontal" role="form" name="form.makerForm" ng-submit="submitTest()" novalidate>
                                <div class="form-group" ng-class="{ 'has-error' : form.makerForm.title.$error.required && !form.makerForm.title.$pristine }">
                                    <label translate for="title" class="col-sm-2 control-label">{{'QUIZTITLE'}}</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" id="title" name="title" placeholder="{{'QUIZTITLEPLACE' | translate}}" ng-model="cuest.title"
                                            required>
                                        <span translate ng-show="form.makerForm.title.$error.required && !form.makerForm.title.$pristine" class="help-block">{{'NOQUIZTITLE'}}</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label translate for="description" class="col-sm-2 control-label">{{'QUIZDESCR'}}</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" id="description" name="description" placeholder="{{'QUIZDESCRPLACE' | translate}}"
                                            ng-model="cuest.text">
                                    </div>
                                </div>
                                <br>
                                <div class="form-group">
                                    <label translate for="type" class="col-sm-2 control-label">{{'TYPECAL'}}</label>
                                    <div class="col-sm-10">
                                        <md-radio-group ng-model="cuest.type" required>
                                            <md-radio-button value="pos" class="md-primary">{{'CALPOSITIVE' | translate}}</md-radio-button>
                                            <md-radio-button value="neg">{{'CALNEGATIVE' | translate}}</md-radio-button>
                                        </md-radio-group>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label translate for="questions" class="col-sm-2 control-label">{{'NQUESTIONS'}}</label>
                                    <div class="col-sm-10">
                                        <md-select placeholder="{{'NQUESTIONS' | translate }}" ng-model="selectedQuest" md-selected-text="getSelectedQuest()">
                                            <md-optgroup label="{{'NQUESTIONS' | translate}}">
                                                <md-option ng-value="quest" ng-repeat="quest in quests">
                                                    {{quest}}
                                                </md-option>
                                            </md-optgroup>
                                        </md-select>
                                    </div>
                                </div>
                                <div ng-repeat="n in getNumber(number) track by $index">
                                    <div class="row row-content">
                                        <div class="col-xs-12 col-sm-9 form-group">
                                            <label for="question" class="col-sm-2 control-label">{{ 'QUESTION' | translate}} {{ $index+1 }}</label>
                                            <div class="col-sm-10" ng-class="{ 'has-error' : form.makerForm.question{{$index+1}}.$error.required && !form.makerForm.question{{$index+1}}.$pristine }">
                                                <input type="text" class="form-control" id="question{{$index+1}}" name="question{{$index+1}}" placeholder="{{'QUESTIONPLACE'|translate}}"
                                                    ng-model="cuest.questions[$index].pregunta" required>
                                                <span translate ng-show="form.makerForm.question{{$index+1}}.$error.required && !form.makerForm.question{{$index+1}}.$pristine"
                                                    class="help-block">{{'NOQUESTION'}}</span>
                                                <div class="form-group">
                                                    <hr>
                                                    <label translate for="image" class="col-sm-2 control-label">{{'IMAGE'}} </label>
                                                    <div class="col-sm-10">
                                                        <input type="file" fileread="cuest.questions[$index].image"><br>
                                                        <hr>
                                                    </div>
                                                    <label translate for="answer" class="col-sm-2 control-label">{{'ANSWER'}} 1</label>
                                                    <div class="col-sm-10">
                                                        <input type="text" class="form-control" id="answer" name="answer" placeholder="{{'ANSWERPLACE' | translate}}" ng-model="cuest.questions[$index].r1"
                                                            required>
                                                        <hr>
                                                    </div>
                                                    <label translate for="answer" class="col-sm-2 control-label">{{'ANSWER'}} 2</label>
                                                    <div class="col-sm-10">
                                                        <input type="text" class="form-control" id="answer" name="answer" placeholder="{{'ANSWERPLACE' | translate}}" ng-model="cuest.questions[$index].r2"
                                                            required>
                                                        <hr>
                                                    </div>
                                                    <label translate for="answer" class="col-sm-2 control-label">{{'ANSWER'}} 3</label>
                                                    <div class="col-sm-10">
                                                        <input type="text" class="form-control" id="answer" name="answer" placeholder="{{'ANSWERPLACE' | translate}}" ng-model="cuest.questions[$index].r3"
                                                            required>
                                                        <hr>
                                                    </div>
                                                    <label translate for="answer" class="col-sm-2 control-label">{{'ANSWER'}} 4</label>
                                                    <div class="col-sm-10">
                                                        <input type="text" class="form-control" id="answer" name="answer" placeholder="{{'ANSWERPLACE' | translate}}" ng-model="cuest.questions[$index].r4"
                                                            required>
                                                        <hr>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <hr>
                                                    <label translate for="type" class="col-sm-2 control-label">{{'TYPE'}}</label>
                                                    <div class="col-sm-10">
                                                        <md-radio-group ng-model="cuest.questions[$index].tipo" required>
                                                            <md-radio-button value="unica" class="md-primary">{{'UNIC' | translate}}</md-radio-button>
                                                            <md-radio-button value="multiple">{{'MULTIPLE' | translate}}</md-radio-button>
                                                        </md-radio-group>
                                                    </div>
                                                </div>
                                                <label translate for="correct" class="col-sm-2 control-label">{{'QUESTIONCORRECT'}} </label>
                                                <!-- Si es de tipo única -->
                                                <div ng-if="cuest.questions[$index].tipo=='unica'" class="col-sm-10">
                                                    <select class="form-control" ng-model="cuest.questions[$index].rcorrect" required>
                                                    <option>{{cuest.questions[$index].r1}}</option>
                                                    <option>{{cuest.questions[$index].r2}}</option>
                                                    <option>{{cuest.questions[$index].r3}}</option>
                                                    <option>{{cuest.questions[$index].r4}}</option>
                                                </select>
                                                </div>
                                                <!-- Si es de tipo múltiple -->
                                                <div ng-if="cuest.questions[$index].tipo=='multiple'" class="col-sm-10">
                                                    <md-select placeholder="{{'QUESTIONCORRECT' | translate }}" ng-model="cuest.questions[$index].rcorrect" multiple required>
                                                        <md-optgroup label="{{'CORRECTSELECT' | translate}}">
                                                            <md-option ng-value="cuest.questions[$index].r1">{{cuest.questions[$index].r1}}</md-option>
                                                            <md-option ng-value="cuest.questions[$index].r2">{{cuest.questions[$index].r2}}</md-option>
                                                            <md-option ng-value="cuest.questions[$index].r3">{{cuest.questions[$index].r3}}</md-option>
                                                            <md-option ng-value="cuest.questions[$index].r4">{{cuest.questions[$index].r4}}</md-option>
                                                        </md-optgroup>
                                                    </md-select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-xs-12 col-sm-3">
                                            <md-card>
                                                <md-card-header>
                                                    <md-card-header-text class="md-header-padding">
                                                        <span class="md-title">{{cuest.title}}</span>
                                                        <span class="md-subhead">{{ 'QUESTION' | translate}} {{ $index+1 }}</span>
                                                    </md-card-header-text>
                                                </md-card-header>
                                                <img class="md-card-image" ng-src="{{cuest.questions[$index].image}}" alt="">
                                                <md-card-title class="md-title-padding">
                                                    <md-card-title-text>
                                                        <span class="md-subhead"><strong>{{cuest.questions[$index].pregunta}}</strong></span>
                                                    </md-card-title-text>
                                                </md-card-title>
                                                <md-card-content ng-if="cuest.questions[$index].tipo=='unica'">
                                                    <!-- Si es tipo única -->
                                                    <md-radio-group>
                                                        <ul class="list-group list-group-flush">
                                                            <li class="list-group-item">
                                                                <md-radio-button value="R1" class="md-primary">{{cuest.questions[$index].r1}}</md-radio-button>
                                                            </li>
                                                            <li class="list-group-item">
                                                                <md-radio-button value="R2" class="md-primary">{{cuest.questions[$index].r2}}</md-radio-button>
                                                            </li>
                                                            <li class="list-group-item">
                                                                <md-radio-button value="R3" class="md-primary">{{cuest.questions[$index].r3}}</md-radio-button>
                                                            </li>
                                                            <li class="list-group-item">
                                                                <md-radio-button value="R4" class="md-primary">{{cuest.questions[$index].r4}}</md-radio-button>
                                                            </li>
                                                        </ul>
                                                    </md-radio-group>
                                                </md-card-content>
                                                <md-card-content ng-if="cuest.questions[$index].tipo=='multiple'">
                                                    <!-- Si es tipo múltiple -->
                                                    <ul class="list-group list-group-flush">
                                                        <li class="list-group-item">
                                                            <md-checkbox class="md-primary" aria-label="R1">{{cuest.questions[$index].r1}}</md-checkbox>
                                                        </li>
                                                        <li class="list-group-item">
                                                            <md-checkbox class="md-primary" aria-label="R2">{{cuest.questions[$index].r2}}</md-checkbox>
                                                        </li>
                                                        <li class="list-group-item">
                                                            <md-checkbox class="md-primary" aria-label="R3">{{cuest.questions[$index].r3}}</md-checkbox>
                                                        </li>
                                                        <li class="list-group-item">
                                                            <md-checkbox class="md-primary" aria-label="R4">{{cuest.questions[$index].r4}}</md-checkbox>
                                                        </li>
                                                    </ul>
                                                </md-card-content>
                                            </md-card>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <br>
                                    <label translate for="type" class="col-sm-4 control-label">{{'SAVETOCLOUD'}}</label>
                                    <div class="col-sm-4">
                                        <md-radio-group ng-model="cuest.cuestCloud" required>
                                            <md-radio-button value="true" class="md-primary">{{'YES' | translate}}</md-radio-button>
                                            <md-radio-button value="false">{{'NO' | translate}}</md-radio-button>
                                        </md-radio-group>
                                    </div>

                                    <div class="col-sm-offset-2 col-sm-10">
                                        <md-button translate="CREATE" type="submit" class="md-raised md-primary" ng-disabled="form.makerForm.$invalid">Crear</md-button>
                                    </div>
                                </div>
                            </form>
                        </md-content>
                    </md-tab>
                    <md-tab label="{{'MAKERTAB2' | translate}}">
                        <md-content class="md-padding">
                            <div class="col-xs-12">
                                <h3 translate>{{'IMPORTITLE'}}</h3>
                                <hr>
                            </div>
                            <div class="col-xs-6">
                                <p><em translate>{{'IMPORTALERT'}}</em></p>
                                <input id="inputCuest" type="file" class="file" data-show-preview="false" fileread="fichero.fic">
                            </div>
                            <div class="col-xs-6">
                                <md-button translate="IMPORTBUTTON" md-colors="{background: 'teal'}" ng-click="import()" class="md-raised md-accent">Importar</md-button>
                            </div>
                        </md-content>
                    </md-tab>
                </md-tabs>
            </md-content>
        </div>
    </div>
</div>